  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 17:56:44.728996', '2025-07-31 17:56:44.728998') RETURNING "key"[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 17:56:53.043689', '2025-07-31 17:56:53.043691') RETURNING "key"[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 17:57:36.412416', '2025-07-31 17:57:36.412418') RETURNING "key"[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 17:58:11.105121', '2025-07-31 17:58:11.105123') RETURNING "key"[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.3ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (1.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 17:58:18.483418', '2025-07-31 17:58:18.483420') RETURNING "key"[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 17:58:33.801518', '2025-07-31 17:58:33.801519') RETURNING "key"[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.3ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (1.9ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (1.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 17:59:16.567419', '2025-07-31 17:59:16.567421') RETURNING "key"[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x000000033189c6d0> Create (3.3ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 17:59:16.642052"], ["updated_at", "2025-07-31 17:59:16.642052"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.4ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x0000000168d56240> Create (0.2ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 17:59:16.680871"], ["updated_at", "2025-07-31 17:59:16.680871"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x0000000103101f40> Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 17:59:16.700302"], ["updated_at", "2025-07-31 17:59:16.700302"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x00000003319b8ca8> Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 17:59:16.718387"], ["updated_at", "2025-07-31 17:59:16.718387"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x0000000331831100> Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 17:59:16.738213"], ["updated_at", "2025-07-31 17:59:16.738213"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 17:59:30.269384', '2025-07-31 17:59:30.269386') RETURNING "key"[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x000000012599ddf8> Create (3.4ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 17:59:30.325786"], ["updated_at", "2025-07-31 17:59:30.325786"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.5ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x0000000141b3ece0> Create (0.2ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 17:59:30.368625"], ["updated_at", "2025-07-31 17:59:30.368625"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x0000000127ef03d0> Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 17:59:30.383898"], ["updated_at", "2025-07-31 17:59:30.383898"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x0000000127cd9380> Create (0.2ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 17:59:30.410314"], ["updated_at", "2025-07-31 17:59:30.410314"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x0000000141bb8ea0> Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 17:59:30.439653"], ["updated_at", "2025-07-31 17:59:30.439653"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 17:59:37.736344', '2025-07-31 17:59:37.736346') RETURNING "key"[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x000000016fe65288> Create (1.9ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 17:59:37.786897"], ["updated_at", "2025-07-31 17:59:37.786897"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 17:59:54.812604', '2025-07-31 17:59:54.812606') RETURNING "key"[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (3.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 17:59:54.864527"], ["updated_at", "2025-07-31 17:59:54.864527"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "mixvejnm96vys7dtneqxqtplwo70"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 17:59:54.931582"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-07-31 17:59:54.932480"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 17:59:54.934876"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.5ms) [0m[32mUploaded file to key: mixvejnm96vys7dtneqxqtplwo70 (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (1.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mTestDocument Load (0.1ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 1]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 17:59:54.964895"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 17:59:54.979649"], ["updated_at", "2025-07-31 17:59:54.979649"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "fpamnoe8ni37q0a2ew3mgcli0roc"], ["filename", "test.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 15], ["checksum", "xy0EDuH9zYvOCfyLbmxHlA=="], ["created_at", "2025-07-31 17:59:54.995415"]]
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "TestDocument"], ["record_id", 2], ["blob_id", 2], ["created_at", "2025-07-31 17:59:54.998042"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 17:59:55.000141"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (1.6ms) [0m[32mUploaded file to key: fpamnoe8ni37q0a2ew3mgcli0roc (checksum: xy0EDuH9zYvOCfyLbmxHlA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 747fe805-d289-4464-a38a-e11d78cc49a3) to Test(default) with arguments: #<GlobalID:0x000000016885dd88 @uri=#<URI::GID gid://test/ActiveStorage::Blob/2>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 17:59:55.053263"], ["updated_at", "2025-07-31 17:59:55.053263"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "fmdn50h4supn0rltrzp7fybkt2af"], ["filename", "test.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 15], ["checksum", "xy0EDuH9zYvOCfyLbmxHlA=="], ["created_at", "2025-07-31 17:59:55.070106"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "TestDocument"], ["record_id", 3], ["blob_id", 3], ["created_at", "2025-07-31 17:59:55.070971"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 17:59:55.071654"], ["id", 3]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: fmdn50h4supn0rltrzp7fybkt2af (checksum: xy0EDuH9zYvOCfyLbmxHlA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 0cdf26f7-9a76-4219-9d4e-b45fbffd46ef) to Test(default) with arguments: #<GlobalID:0x0000000333191140 @uri=#<URI::GID gid://test/ActiveStorage::Blob/3>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 17:59:55.081848"], ["updated_at", "2025-07-31 17:59:55.081848"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "zypupj5zzgnrcnb61ubojs50cm2y"], ["filename", "first.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 17:59:55.093176"]]
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 4], ["blob_id", 4], ["created_at", "2025-07-31 17:59:55.093646"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 17:59:55.094622"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: zypupj5zzgnrcnb61ubojs50cm2y (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 4]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 4]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 4]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 17:59:55.104945"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (0.1ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 4]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "kwmhnx10t9fmx5l1lkr6ws8tf5u5"], ["filename", "second.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "lsFcK7KSEZO/KQ34zYXiug=="], ["created_at", "2025-07-31 17:59:55.116957"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 4], ["blob_id", 5], ["created_at", "2025-07-31 17:59:55.118473"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 17:59:55.118613"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: kwmhnx10t9fmx5l1lkr6ws8tf5u5 (checksum: lsFcK7KSEZO/KQ34zYXiug==)[0m
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 45c84cab-4e89-422b-af69-df1fac77a17e) to Test(default) with arguments: #<GlobalID:0x0000000333619370 @uri=#<URI::GID gid://test/ActiveStorage::Blob/4>>
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 5]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 5]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 4]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 17:59:55.130660"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 17:59:55.141375"], ["updated_at", "2025-07-31 17:59:55.141375"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "dmncarnneme3e0lybupw33keqe82"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 17:59:55.164711"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 5], ["blob_id", 6], ["created_at", "2025-07-31 17:59:55.165932"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 17:59:55.166190"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: dmncarnneme3e0lybupw33keqe82 (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 6]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 6]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 5]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 17:59:55.174680"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 18:00:12.421405', '2025-07-31 18:00:12.421407') RETURNING "key"[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (2.8ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:00:12.478246"], ["updated_at", "2025-07-31 18:00:12.478246"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "tl45pqvzvp6rtyomgrq0sgrljsdi"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:00:12.547951"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-07-31 18:00:12.549158"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:00:12.551574"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: tl45pqvzvp6rtyomgrq0sgrljsdi (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (1.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 1]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:00:12.593681"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:00:12.615022"], ["updated_at", "2025-07-31 18:00:12.615022"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "ixitzk4rf10d3dmea6yehucrv2et"], ["filename", "test.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 15], ["checksum", "xy0EDuH9zYvOCfyLbmxHlA=="], ["created_at", "2025-07-31 18:00:12.630606"]]
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "TestDocument"], ["record_id", 2], ["blob_id", 2], ["created_at", "2025-07-31 18:00:12.632137"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:00:12.633616"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.6ms) [0m[32mUploaded file to key: ixitzk4rf10d3dmea6yehucrv2et (checksum: xy0EDuH9zYvOCfyLbmxHlA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 884b723c-0961-4060-9e79-c83523767d02) to Test(default) with arguments: #<GlobalID:0x00000001690f4d70 @uri=#<URI::GID gid://test/ActiveStorage::Blob/2>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.2ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:00:12.667852"], ["updated_at", "2025-07-31 18:00:12.667852"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "pv85ohbrkkp40suw7z96z1yu7ua5"], ["filename", "test.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 15], ["checksum", "xy0EDuH9zYvOCfyLbmxHlA=="], ["created_at", "2025-07-31 18:00:12.683929"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "TestDocument"], ["record_id", 3], ["blob_id", 3], ["created_at", "2025-07-31 18:00:12.684722"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:00:12.685399"], ["id", 3]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.5ms) [0m[32mUploaded file to key: pv85ohbrkkp40suw7z96z1yu7ua5 (checksum: xy0EDuH9zYvOCfyLbmxHlA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 9c4dfbcd-962b-49c5-8304-368b9949d1a5) to Test(default) with arguments: #<GlobalID:0x0000000169915450 @uri=#<URI::GID gid://test/ActiveStorage::Blob/3>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:00:12.695863"], ["updated_at", "2025-07-31 18:00:12.695863"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "2jp67h371x2xk4c4ezv9246aopwn"], ["filename", "first.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:00:12.707319"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 4], ["blob_id", 4], ["created_at", "2025-07-31 18:00:12.707690"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:00:12.708922"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: 2jp67h371x2xk4c4ezv9246aopwn (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 4]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 4]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 4]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:00:12.720934"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (0.1ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 4]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "tbqaraidf0rfk06rtuhhtiuvtonn"], ["filename", "second.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "lsFcK7KSEZO/KQ34zYXiug=="], ["created_at", "2025-07-31 18:00:12.739558"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 4], ["blob_id", 5], ["created_at", "2025-07-31 18:00:12.741486"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:00:12.741691"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: tbqaraidf0rfk06rtuhhtiuvtonn (checksum: lsFcK7KSEZO/KQ34zYXiug==)[0m
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: ffaf540e-f0ed-4a35-8f64-2969f5d8bda4) to Test(default) with arguments: #<GlobalID:0x0000000136f7bac0 @uri=#<URI::GID gid://test/ActiveStorage::Blob/4>>
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 5]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 5]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 4]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:00:12.753696"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mMultiCallbackDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Multi callback test"], ["created_at", "2025-07-31 18:00:12.765885"], ["updated_at", "2025-07-31 18:00:12.765885"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "MultiCallbackDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "MultiCallbackDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "41uh8qd9n97hioshojk94wi4puw1"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:00:12.784035"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "MultiCallbackDocument"], ["record_id", 5], ["blob_id", 6], ["created_at", "2025-07-31 18:00:12.785225"]]
  [1m[36mMultiCallbackDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:00:12.785481"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: 41uh8qd9n97hioshojk94wi4puw1 (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 6]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 6]]
  [1m[36mMultiCallbackDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 5]]
  [1m[36mMultiCallbackDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:00:12.792867"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 18:00:45.473568', '2025-07-31 18:00:45.473570') RETURNING "key"[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mMultiCallbackDocument Create (2.0ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Multi callback test"], ["created_at", "2025-07-31 18:00:45.539943"], ["updated_at", "2025-07-31 18:00:45.539943"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "active_storage_attachments"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "MultiCallbackDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "MultiCallbackDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "dn3rvg0xb4eex3htjgi0imz6qyri"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:00:45.606295"]]
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "MultiCallbackDocument"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-07-31 18:00:45.607570"]]
  [1m[36mMultiCallbackDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:00:45.610368"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.7ms) [0m[32mUploaded file to key: dn3rvg0xb4eex3htjgi0imz6qyri (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mMultiCallbackDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 1]]
  [1m[36mMultiCallbackDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:00:45.641199"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
Running 2 callbacks for MultiCallbackDocument#file
Running 2 callbacks for MultiCallbackDocument#file
  [1m[36mActiveStorage::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "active_storage_attachments"[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 18:00:58.862294', '2025-07-31 18:00:58.862296') RETURNING "key"[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (3.2ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:00:58.912495"], ["updated_at", "2025-07-31 18:00:58.912495"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "yw62z0zokp9ruuh23hjuv6l1t7n8"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:00:58.969573"]]
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-07-31 18:00:58.970498"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:00:58.973192"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.8ms) [0m[32mUploaded file to key: yw62z0zokp9ruuh23hjuv6l1t7n8 (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (1.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 1]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:00:59.002214"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
Running 1 callbacks for TestDocument#file
Running 1 callbacks for TestDocument#file
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:00:59.016219"], ["updated_at", "2025-07-31 18:00:59.016219"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "8wm6x2ofcv97y35pohalftahd9mu"], ["filename", "test.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 15], ["checksum", "xy0EDuH9zYvOCfyLbmxHlA=="], ["created_at", "2025-07-31 18:00:59.031532"]]
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "TestDocument"], ["record_id", 2], ["blob_id", 2], ["created_at", "2025-07-31 18:00:59.033080"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:00:59.034339"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.8ms) [0m[32mUploaded file to key: 8wm6x2ofcv97y35pohalftahd9mu (checksum: xy0EDuH9zYvOCfyLbmxHlA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 96bc0850-b012-419b-8257-1e2762b8f3e4) to Test(default) with arguments: #<GlobalID:0x0000000132b18d38 @uri=#<URI::GID gid://test/ActiveStorage::Blob/2>>
Running 1 callbacks for TestDocument#image
Running 1 callbacks for TestDocument#image
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:00:59.073473"], ["updated_at", "2025-07-31 18:00:59.073473"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "mc6cb1s16k6yb4b472rhm7fvv7h6"], ["filename", "test.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 15], ["checksum", "xy0EDuH9zYvOCfyLbmxHlA=="], ["created_at", "2025-07-31 18:00:59.090291"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "TestDocument"], ["record_id", 3], ["blob_id", 3], ["created_at", "2025-07-31 18:00:59.091156"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:00:59.091965"], ["id", 3]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: mc6cb1s16k6yb4b472rhm7fvv7h6 (checksum: xy0EDuH9zYvOCfyLbmxHlA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: d72f9c1c-2348-4dc5-b448-be7e286b05e7) to Test(default) with arguments: #<GlobalID:0x0000000127e99d50 @uri=#<URI::GID gid://test/ActiveStorage::Blob/3>>
Running 1 callbacks for TestDocument#image
Running 1 callbacks for TestDocument#image
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:00:59.103294"], ["updated_at", "2025-07-31 18:00:59.103294"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "2qmrvsnipk6w7efp4a7dfzobem3v"], ["filename", "first.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:00:59.115482"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 4], ["blob_id", 4], ["created_at", "2025-07-31 18:00:59.115834"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:00:59.116710"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: 2qmrvsnipk6w7efp4a7dfzobem3v (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 4]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 4]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 4]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:00:59.127107"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
Running 1 callbacks for TestDocument#file
Running 1 callbacks for TestDocument#file
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (0.0ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 4]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "dlgg1gg11k6jn5ppkeeqef3rzjj2"], ["filename", "second.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "lsFcK7KSEZO/KQ34zYXiug=="], ["created_at", "2025-07-31 18:00:59.138863"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 4], ["blob_id", 5], ["created_at", "2025-07-31 18:00:59.140797"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:00:59.141031"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: dlgg1gg11k6jn5ppkeeqef3rzjj2 (checksum: lsFcK7KSEZO/KQ34zYXiug==)[0m
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 92cbccbc-166a-4e92-8337-a6bb72dfb7a8) to Test(default) with arguments: #<GlobalID:0x00000001329ddef0 @uri=#<URI::GID gid://test/ActiveStorage::Blob/4>>
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 5]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 5]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 4]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:00:59.152921"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
Running 1 callbacks for TestDocument#file
Running 1 callbacks for TestDocument#file
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mMultiCallbackDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Multi callback test"], ["created_at", "2025-07-31 18:00:59.165460"], ["updated_at", "2025-07-31 18:00:59.165460"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "active_storage_attachments"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "MultiCallbackDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "MultiCallbackDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "79chgoenqxrfqvwne5t3gfi26ram"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:00:59.184472"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "MultiCallbackDocument"], ["record_id", 5], ["blob_id", 6], ["created_at", "2025-07-31 18:00:59.185604"]]
  [1m[36mMultiCallbackDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:00:59.185886"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: 79chgoenqxrfqvwne5t3gfi26ram (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 6]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 6]]
  [1m[36mMultiCallbackDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 5]]
  [1m[36mMultiCallbackDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:00:59.193817"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
Running 2 callbacks for MultiCallbackDocument#file
Running 2 callbacks for MultiCallbackDocument#file
  [1m[36mActiveStorage::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "active_storage_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 18:01:16.307547', '2025-07-31 18:01:16.307549') RETURNING "key"[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mMultiCallbackDocument Create (1.9ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Multi callback test"], ["created_at", "2025-07-31 18:01:16.373897"], ["updated_at", "2025-07-31 18:01:16.373897"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "active_storage_attachments"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "MultiCallbackDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "MultiCallbackDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "nggdrwo9dh41z2iab3skdixfhldt"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:01:16.440452"]]
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "MultiCallbackDocument"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-07-31 18:01:16.441772"]]
  [1m[36mMultiCallbackDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:01:16.444886"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.8ms) [0m[32mUploaded file to key: nggdrwo9dh41z2iab3skdixfhldt (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mMultiCallbackDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 1]]
  [1m[36mMultiCallbackDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:01:16.475950"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
Running 2 callbacks for MultiCallbackDocument#file
Running 2 callbacks for MultiCallbackDocument#file
  [1m[36mActiveStorage::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "active_storage_attachments"[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 18:01:31.316921', '2025-07-31 18:01:31.316923') RETURNING "key"[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (3.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:01:31.389534"], ["updated_at", "2025-07-31 18:01:31.389534"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "6in1ovr7xnds9ltwk6vo57bphcow"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:01:31.454107"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-07-31 18:01:31.454920"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:01:31.457432"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: 6in1ovr7xnds9ltwk6vo57bphcow (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (1.5ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 1]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:01:31.487040"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
Running 1 callbacks for TestDocument#file
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:01:31.501020"], ["updated_at", "2025-07-31 18:01:31.501020"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "pu6l8jnrzb7rsil81wfgedhhgsdf"], ["filename", "test.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 15], ["checksum", "xy0EDuH9zYvOCfyLbmxHlA=="], ["created_at", "2025-07-31 18:01:31.516673"]]
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "TestDocument"], ["record_id", 2], ["blob_id", 2], ["created_at", "2025-07-31 18:01:31.518387"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:01:31.519856"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.6ms) [0m[32mUploaded file to key: pu6l8jnrzb7rsil81wfgedhhgsdf (checksum: xy0EDuH9zYvOCfyLbmxHlA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: e28a7a5f-5456-47f5-9943-c6c840bbe2c3) to Test(default) with arguments: #<GlobalID:0x000000013e990220 @uri=#<URI::GID gid://test/ActiveStorage::Blob/2>>
Running 1 callbacks for TestDocument#image
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:01:31.551903"], ["updated_at", "2025-07-31 18:01:31.551903"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "7pa3xqoljnbwuf455jy6g4mojxpe"], ["filename", "test.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 15], ["checksum", "xy0EDuH9zYvOCfyLbmxHlA=="], ["created_at", "2025-07-31 18:01:31.569590"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "TestDocument"], ["record_id", 3], ["blob_id", 3], ["created_at", "2025-07-31 18:01:31.570663"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:01:31.571417"], ["id", 3]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: 7pa3xqoljnbwuf455jy6g4mojxpe (checksum: xy0EDuH9zYvOCfyLbmxHlA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 9e9e699e-ace4-4fba-b4a5-8efdb09b4a5f) to Test(default) with arguments: #<GlobalID:0x000000013ec79e78 @uri=#<URI::GID gid://test/ActiveStorage::Blob/3>>
Running 1 callbacks for TestDocument#image
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:01:31.581537"], ["updated_at", "2025-07-31 18:01:31.581537"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "4zti5ij17ma510b5l4eb7mpab63p"], ["filename", "first.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:01:31.592264"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 4], ["blob_id", 4], ["created_at", "2025-07-31 18:01:31.592548"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:01:31.593374"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: 4zti5ij17ma510b5l4eb7mpab63p (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 4]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 4]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 4]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:01:31.604445"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
Running 1 callbacks for TestDocument#file
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (0.1ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 4]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "fx54xyyitygsyiicelqlyeyh8fzv"], ["filename", "second.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "lsFcK7KSEZO/KQ34zYXiug=="], ["created_at", "2025-07-31 18:01:31.621806"]]
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 4], ["blob_id", 5], ["created_at", "2025-07-31 18:01:31.623634"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:01:31.623943"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: fx54xyyitygsyiicelqlyeyh8fzv (checksum: lsFcK7KSEZO/KQ34zYXiug==)[0m
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: aae62555-5f24-4feb-93f0-6c6317e91b05) to Test(default) with arguments: #<GlobalID:0x000000013e4ddbd8 @uri=#<URI::GID gid://test/ActiveStorage::Blob/4>>
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 5]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 5]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 4]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:01:31.635854"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
Running 1 callbacks for TestDocument#file
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mMultiCallbackDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Multi callback test"], ["created_at", "2025-07-31 18:01:31.648344"], ["updated_at", "2025-07-31 18:01:31.648344"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "active_storage_attachments"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "MultiCallbackDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "MultiCallbackDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "if1whuhrobgk190r09bywy4gi0ef"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:01:31.667648"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "MultiCallbackDocument"], ["record_id", 5], ["blob_id", 6], ["created_at", "2025-07-31 18:01:31.668854"]]
  [1m[36mMultiCallbackDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:01:31.669195"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: if1whuhrobgk190r09bywy4gi0ef (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 6]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 6]]
  [1m[36mMultiCallbackDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 5]]
  [1m[36mMultiCallbackDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:01:31.677142"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
Running 2 callbacks for MultiCallbackDocument#file
  [1m[36mActiveStorage::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "active_storage_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 18:05:28.562837', '2025-07-31 18:05:28.562838') RETURNING "key"[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (2.9ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:05:28.622497"], ["updated_at", "2025-07-31 18:05:28.622497"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "mfbrqaua6rhz7tr629f43y8qeuf9"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:05:28.680636"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-07-31 18:05:28.681507"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:05:28.683712"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: mfbrqaua6rhz7tr629f43y8qeuf9 (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (1.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 1]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:05:28.711266"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:05:28.723523"], ["updated_at", "2025-07-31 18:05:28.723523"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "ka2kqhw6xzd2lhp7dmnruuaoaf21"], ["filename", "test.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 15], ["checksum", "xy0EDuH9zYvOCfyLbmxHlA=="], ["created_at", "2025-07-31 18:05:28.737958"]]
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "TestDocument"], ["record_id", 2], ["blob_id", 2], ["created_at", "2025-07-31 18:05:28.739473"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:05:28.740776"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.5ms) [0m[32mUploaded file to key: ka2kqhw6xzd2lhp7dmnruuaoaf21 (checksum: xy0EDuH9zYvOCfyLbmxHlA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 028a6db9-7d62-4490-8f2a-9592ad6cfd79) to Test(default) with arguments: #<GlobalID:0x0000000133b73868 @uri=#<URI::GID gid://test/ActiveStorage::Blob/2>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:05:28.777263"], ["updated_at", "2025-07-31 18:05:28.777263"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "t0zniy6y4d3ocbe1352m2a2wnvs1"], ["filename", "test.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 15], ["checksum", "xy0EDuH9zYvOCfyLbmxHlA=="], ["created_at", "2025-07-31 18:05:28.792974"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "TestDocument"], ["record_id", 3], ["blob_id", 3], ["created_at", "2025-07-31 18:05:28.793709"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:05:28.794408"], ["id", 3]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: t0zniy6y4d3ocbe1352m2a2wnvs1 (checksum: xy0EDuH9zYvOCfyLbmxHlA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 7fbe746e-df55-4a69-a82d-40f24ea3f32e) to Test(default) with arguments: #<GlobalID:0x000000013339a560 @uri=#<URI::GID gid://test/ActiveStorage::Blob/3>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:05:28.804076"], ["updated_at", "2025-07-31 18:05:28.804076"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "690qv4wtww6inklj5kjmv6xfzw72"], ["filename", "first.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:05:28.813903"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 4], ["blob_id", 4], ["created_at", "2025-07-31 18:05:28.814095"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:05:28.814868"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: 690qv4wtww6inklj5kjmv6xfzw72 (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 4]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 4]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 4]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:05:28.824476"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (0.0ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 4]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "l5o6g1i5h5dgqhlj4j860ji4h6pz"], ["filename", "second.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "lsFcK7KSEZO/KQ34zYXiug=="], ["created_at", "2025-07-31 18:05:28.835799"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 4], ["blob_id", 5], ["created_at", "2025-07-31 18:05:28.837276"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:05:28.837406"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: l5o6g1i5h5dgqhlj4j860ji4h6pz (checksum: lsFcK7KSEZO/KQ34zYXiug==)[0m
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 59d51b4c-c7db-40be-a1b4-69befaae2522) to Test(default) with arguments: #<GlobalID:0x0000000133b1ae48 @uri=#<URI::GID gid://test/ActiveStorage::Blob/4>>
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 5]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 5]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 4]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:05:28.848019"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mMultiCallbackDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Multi callback test"], ["created_at", "2025-07-31 18:05:28.859176"], ["updated_at", "2025-07-31 18:05:28.859176"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "active_storage_attachments"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "MultiCallbackDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "MultiCallbackDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "rc8y13m74lox6e9hk5qjty6il50u"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:05:28.877228"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "MultiCallbackDocument"], ["record_id", 5], ["blob_id", 6], ["created_at", "2025-07-31 18:05:28.878560"]]
  [1m[36mMultiCallbackDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:05:28.878864"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: rc8y13m74lox6e9hk5qjty6il50u (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 6]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 6]]
  [1m[36mMultiCallbackDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 5]]
  [1m[36mMultiCallbackDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:05:28.887034"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "active_storage_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 18:08:09.995253', '2025-07-31 18:08:09.995255') RETURNING "key"[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (3.5ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:08:10.060616"], ["updated_at", "2025-07-31 18:08:10.060616"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "4dcx1hxonsi3cygc1w6l1zzjv5mn"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:08:10.119266"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-07-31 18:08:10.120169"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:08:10.122315"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.5ms) [0m[32mUploaded file to key: 4dcx1hxonsi3cygc1w6l1zzjv5mn (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.9ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mTestDocument Load (0.1ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 1]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:08:10.149315"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:08:10.162391"], ["updated_at", "2025-07-31 18:08:10.162391"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "5v75k6kjvqitrtu0uefrtmkxppnl"], ["filename", "test.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 15], ["checksum", "xy0EDuH9zYvOCfyLbmxHlA=="], ["created_at", "2025-07-31 18:08:10.176302"]]
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "TestDocument"], ["record_id", 2], ["blob_id", 2], ["created_at", "2025-07-31 18:08:10.177786"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:08:10.179063"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.5ms) [0m[32mUploaded file to key: 5v75k6kjvqitrtu0uefrtmkxppnl (checksum: xy0EDuH9zYvOCfyLbmxHlA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: ddaec776-6c21-469b-a36b-db0763e1a6bc) to Test(default) with arguments: #<GlobalID:0x000000014567cd20 @uri=#<URI::GID gid://test/ActiveStorage::Blob/2>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:08:10.208620"], ["updated_at", "2025-07-31 18:08:10.208620"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "581c7zmo91e351dlrt718kun2b8n"], ["filename", "test.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 15], ["checksum", "xy0EDuH9zYvOCfyLbmxHlA=="], ["created_at", "2025-07-31 18:08:10.225564"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "TestDocument"], ["record_id", 3], ["blob_id", 3], ["created_at", "2025-07-31 18:08:10.226469"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:08:10.227289"], ["id", 3]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: 581c7zmo91e351dlrt718kun2b8n (checksum: xy0EDuH9zYvOCfyLbmxHlA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 37f02791-d21d-48d3-83e6-6e598fdae9ba) to Test(default) with arguments: #<GlobalID:0x0000000146056a80 @uri=#<URI::GID gid://test/ActiveStorage::Blob/3>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:08:10.236979"], ["updated_at", "2025-07-31 18:08:10.236979"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "0qdhukh370ocy6n1sserh9rgpwk0"], ["filename", "first.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:08:10.247520"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 4], ["blob_id", 4], ["created_at", "2025-07-31 18:08:10.247722"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:08:10.248486"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: 0qdhukh370ocy6n1sserh9rgpwk0 (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 4]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 4]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 4]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:08:10.258163"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (0.1ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 4]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "ofxmq1erfq9qienek5ebhxkio4ft"], ["filename", "second.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "lsFcK7KSEZO/KQ34zYXiug=="], ["created_at", "2025-07-31 18:08:10.274845"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 4], ["blob_id", 5], ["created_at", "2025-07-31 18:08:10.276601"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:08:10.276976"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: ofxmq1erfq9qienek5ebhxkio4ft (checksum: lsFcK7KSEZO/KQ34zYXiug==)[0m
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 7ac9cb76-4615-4697-aaa5-a1c06034edce) to Test(default) with arguments: #<GlobalID:0x000000014537c9b8 @uri=#<URI::GID gid://test/ActiveStorage::Blob/4>>
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 5]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 5]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 4]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:08:10.288432"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mMultiCallbackDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Multi callback test"], ["created_at", "2025-07-31 18:08:10.300508"], ["updated_at", "2025-07-31 18:08:10.300508"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "active_storage_attachments"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "MultiCallbackDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "MultiCallbackDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "77oqwkgkw5v7x1bd7cqofam2kjhi"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:08:10.318216"]]
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "MultiCallbackDocument"], ["record_id", 5], ["blob_id", 6], ["created_at", "2025-07-31 18:08:10.319910"]]
  [1m[36mMultiCallbackDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:08:10.320307"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: 77oqwkgkw5v7x1bd7cqofam2kjhi (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 6]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 6]]
  [1m[36mMultiCallbackDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 5]]
  [1m[36mMultiCallbackDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:08:10.327789"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "active_storage_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mGallery Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Gallery"], ["created_at", "2025-07-31 18:08:10.349390"], ["updated_at", "2025-07-31 18:08:10.349390"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 6], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 6], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "jiwhvd0uzdte3dhitczas0tpf15s"], ["filename", "photo1.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "0nwGiDMOwP8FcYLUTkJ60A=="], ["created_at", "2025-07-31 18:08:10.378681"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "photos"], ["record_type", "Gallery"], ["record_id", 6], ["blob_id", 7], ["created_at", "2025-07-31 18:08:10.379488"]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "y84g52nmhvf6j4cg1pkwt6j268l9"], ["filename", "photo2.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "2iSN3pT0uZ8YGYVxQP3v/A=="], ["created_at", "2025-07-31 18:08:10.381133"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "photos"], ["record_type", "Gallery"], ["record_id", 6], ["blob_id", 8], ["created_at", "2025-07-31 18:08:10.381263"]]
  [1m[36mGallery Update (0.1ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:08:10.382700"], ["id", 6]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: jiwhvd0uzdte3dhitczas0tpf15s (checksum: 0nwGiDMOwP8FcYLUTkJ60A==)[0m
[36m  Disk Storage (1.0ms) [0m[32mUploaded file to key: y84g52nmhvf6j4cg1pkwt6j268l9 (checksum: 2iSN3pT0uZ8YGYVxQP3v/A==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 51463414-e855-4c09-86fa-709995f4580b) to Test(default) with arguments: #<GlobalID:0x00000001453f5d18 @uri=#<URI::GID gid://test/ActiveStorage::Blob/7>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: d7eabdca-d77f-455e-88dc-45e39fde747d) to Test(default) with arguments: #<GlobalID:0x00000001453f43a0 @uri=#<URI::GID gid://test/ActiveStorage::Blob/8>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mGallery Create (0.4ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Gallery"], ["created_at", "2025-07-31 18:08:10.403683"], ["updated_at", "2025-07-31 18:08:10.403683"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 7], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 7], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "4z03zrivxhw75ptlafdrxu7cctkj"], ["filename", "photo1.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "0nwGiDMOwP8FcYLUTkJ60A=="], ["created_at", "2025-07-31 18:08:10.414173"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "photos"], ["record_type", "Gallery"], ["record_id", 7], ["blob_id", 9], ["created_at", "2025-07-31 18:08:10.416067"]]
  [1m[36mGallery Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:08:10.416487"], ["id", 7]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: 4z03zrivxhw75ptlafdrxu7cctkj (checksum: 0nwGiDMOwP8FcYLUTkJ60A==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: fc12a338-e4ea-4b2b-a9d9-b044cd2eed94) to Test(default) with arguments: #<GlobalID:0x00000001456bff08 @uri=#<URI::GID gid://test/ActiveStorage::Blob/9>>
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 7], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "7p9ef4am6mjtg3q1ougodrp09m4j"], ["filename", "photo2.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "2iSN3pT0uZ8YGYVxQP3v/A=="], ["created_at", "2025-07-31 18:08:10.423269"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "photos"], ["record_type", "Gallery"], ["record_id", 7], ["blob_id", 10], ["created_at", "2025-07-31 18:08:10.423638"]]
  [1m[36mGallery Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:08:10.423766"], ["id", 7]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: 7p9ef4am6mjtg3q1ougodrp09m4j (checksum: 2iSN3pT0uZ8YGYVxQP3v/A==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 7625a032-a6e5-49b6-96c7-07ae7ca42916) to Test(default) with arguments: #<GlobalID:0x0000000146050f40 @uri=#<URI::GID gid://test/ActiveStorage::Blob/10>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 18:20:59.703569', '2025-07-31 18:20:59.703571') RETURNING "key"[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (2.9ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:20:59.758847"], ["updated_at", "2025-07-31 18:20:59.758847"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "zapevgh2yz027py16qbqk1ewjjvl"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:20:59.812380"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-07-31 18:20:59.813133"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:20:59.815396"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: zapevgh2yz027py16qbqk1ewjjvl (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.9ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 1]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:20:59.841675"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:20:59.854120"], ["updated_at", "2025-07-31 18:20:59.854120"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "gsfw77e168d0ys5y5n0zz0vg3e0i"], ["filename", "test.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 15], ["checksum", "xy0EDuH9zYvOCfyLbmxHlA=="], ["created_at", "2025-07-31 18:20:59.867720"]]
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "TestDocument"], ["record_id", 2], ["blob_id", 2], ["created_at", "2025-07-31 18:20:59.869153"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:20:59.870402"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.5ms) [0m[32mUploaded file to key: gsfw77e168d0ys5y5n0zz0vg3e0i (checksum: xy0EDuH9zYvOCfyLbmxHlA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 3e2f11c0-dd93-4a44-a0fc-fd71476f06b4) to Test(default) with arguments: #<GlobalID:0x000000013b157368 @uri=#<URI::GID gid://test/ActiveStorage::Blob/2>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:20:59.903675"], ["updated_at", "2025-07-31 18:20:59.903675"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "3mry2z4dm5vuho2n4z0mam0ahboc"], ["filename", "test.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 15], ["checksum", "xy0EDuH9zYvOCfyLbmxHlA=="], ["created_at", "2025-07-31 18:20:59.918573"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "TestDocument"], ["record_id", 3], ["blob_id", 3], ["created_at", "2025-07-31 18:20:59.919267"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:20:59.919943"], ["id", 3]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: 3mry2z4dm5vuho2n4z0mam0ahboc (checksum: xy0EDuH9zYvOCfyLbmxHlA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 2f8de500-d8b6-41c0-ba15-ea9ebcdac3df) to Test(default) with arguments: #<GlobalID:0x000000012fab5ad8 @uri=#<URI::GID gid://test/ActiveStorage::Blob/3>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.0ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:20:59.928477"], ["updated_at", "2025-07-31 18:20:59.928477"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "m52yghdgogawpiqcbh2yht3402v1"], ["filename", "first.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:20:59.937950"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 4], ["blob_id", 4], ["created_at", "2025-07-31 18:20:59.938129"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:20:59.939353"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: m52yghdgogawpiqcbh2yht3402v1 (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 4]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 4]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 4]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:20:59.948717"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (0.0ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 4]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "61g8bq1bdi7o128dej2zymck3wfz"], ["filename", "second.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "lsFcK7KSEZO/KQ34zYXiug=="], ["created_at", "2025-07-31 18:20:59.959325"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 4], ["blob_id", 5], ["created_at", "2025-07-31 18:20:59.960931"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:20:59.961069"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 61g8bq1bdi7o128dej2zymck3wfz (checksum: lsFcK7KSEZO/KQ34zYXiug==)[0m
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 0434eb75-5182-47cd-8216-c7a1d768341b) to Test(default) with arguments: #<GlobalID:0x000000013b130880 @uri=#<URI::GID gid://test/ActiveStorage::Blob/4>>
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 5]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 5]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 4]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:20:59.970820"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mMultiCallbackDocument Create (0.0ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Multi callback test"], ["created_at", "2025-07-31 18:20:59.981481"], ["updated_at", "2025-07-31 18:20:59.981481"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "active_storage_attachments"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "MultiCallbackDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "MultiCallbackDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "3twfzs65hnguy98ueeov7i9hcdt3"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:20:59.998614"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "MultiCallbackDocument"], ["record_id", 5], ["blob_id", 6], ["created_at", "2025-07-31 18:20:59.999625"]]
  [1m[36mMultiCallbackDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:20:59.999920"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 3twfzs65hnguy98ueeov7i9hcdt3 (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 6]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 6]]
  [1m[36mMultiCallbackDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 5]]
  [1m[36mMultiCallbackDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:21:00.006846"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "active_storage_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mGallery Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Gallery"], ["created_at", "2025-07-31 18:21:00.026514"], ["updated_at", "2025-07-31 18:21:00.026514"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 6], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 6], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "s7neu5no5wu2m7wblyvhw09tqwlv"], ["filename", "photo1.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "0nwGiDMOwP8FcYLUTkJ60A=="], ["created_at", "2025-07-31 18:21:00.048564"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "photos"], ["record_type", "Gallery"], ["record_id", 6], ["blob_id", 7], ["created_at", "2025-07-31 18:21:00.048856"]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "eh6klwe45j5q73b7jy28pysnw137"], ["filename", "photo2.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "2iSN3pT0uZ8YGYVxQP3v/A=="], ["created_at", "2025-07-31 18:21:00.049759"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "photos"], ["record_type", "Gallery"], ["record_id", 6], ["blob_id", 8], ["created_at", "2025-07-31 18:21:00.049880"]]
  [1m[36mGallery Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:21:00.050120"], ["id", 6]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: s7neu5no5wu2m7wblyvhw09tqwlv (checksum: 0nwGiDMOwP8FcYLUTkJ60A==)[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: eh6klwe45j5q73b7jy28pysnw137 (checksum: 2iSN3pT0uZ8YGYVxQP3v/A==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 8b385653-2cdd-498b-8cd1-8ab5ca085a71) to Test(default) with arguments: #<GlobalID:0x000000012d4921a8 @uri=#<URI::GID gid://test/ActiveStorage::Blob/7>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: e6b3a5c0-7431-43c6-ab03-9ab44cb7dedf) to Test(default) with arguments: #<GlobalID:0x000000012d45e970 @uri=#<URI::GID gid://test/ActiveStorage::Blob/8>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mGallery Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Gallery"], ["created_at", "2025-07-31 18:21:00.062080"], ["updated_at", "2025-07-31 18:21:00.062080"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 7], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 7], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "1k559mfirq51m1rnx70esg9r11ce"], ["filename", "photo1.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "0nwGiDMOwP8FcYLUTkJ60A=="], ["created_at", "2025-07-31 18:21:00.070689"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "photos"], ["record_type", "Gallery"], ["record_id", 7], ["blob_id", 9], ["created_at", "2025-07-31 18:21:00.072164"]]
  [1m[36mGallery Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:21:00.072554"], ["id", 7]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 1k559mfirq51m1rnx70esg9r11ce (checksum: 0nwGiDMOwP8FcYLUTkJ60A==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 2cc987c6-6a45-4fdb-a0c2-ec629e2e529d) to Test(default) with arguments: #<GlobalID:0x000000013b054358 @uri=#<URI::GID gid://test/ActiveStorage::Blob/9>>
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 7], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "4r81dak59mu0916e89voyn8pl1ks"], ["filename", "photo2.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "2iSN3pT0uZ8YGYVxQP3v/A=="], ["created_at", "2025-07-31 18:21:00.078175"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "photos"], ["record_type", "Gallery"], ["record_id", 7], ["blob_id", 10], ["created_at", "2025-07-31 18:21:00.078488"]]
  [1m[36mGallery Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:21:00.078635"], ["id", 7]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: 4r81dak59mu0916e89voyn8pl1ks (checksum: 2iSN3pT0uZ8YGYVxQP3v/A==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 9e2d589d-2e9b-44b3-9f72-e76dbe62ad4c) to Test(default) with arguments: #<GlobalID:0x000000013b152ed0 @uri=#<URI::GID gid://test/ActiveStorage::Blob/10>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mBeforeAttachedDocument Create (0.0ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-07-31 18:21:00.086029"], ["updated_at", "2025-07-31 18:21:00.086029"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "BeforeAttachedDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "BeforeAttachedDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "ad1celfeyxw4l4zrav1s3oshcsbb"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:21:00.098992"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "BeforeAttachedDocument"], ["record_id", 8], ["blob_id", 11], ["created_at", "2025-07-31 18:21:00.101719"]]
  [1m[36mBeforeAttachedDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:21:00.103358"], ["id", 8]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: ad1celfeyxw4l4zrav1s3oshcsbb (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 11]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 11]]
  [1m[36mBeforeAttachedDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 8]]
  [1m[36mBeforeAttachedDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:21:00.115225"], ["id", 8]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mDetachmentDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-07-31 18:21:00.142421"], ["updated_at", "2025-07-31 18:21:00.142421"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "DetachmentDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "DetachmentDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "epqqf8hxqnb4p6b0atgnqggqp857"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:21:00.152490"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "DetachmentDocument"], ["record_id", 9], ["blob_id", 12], ["created_at", "2025-07-31 18:21:00.152991"]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:21:00.153343"], ["id", 9]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: epqqf8hxqnb4p6b0atgnqggqp857 (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 12]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 12]]
  [1m[36mDetachmentDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 9]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:21:00.157456"], ["id", 9]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (0.0ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 12]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:21:00.158336"], ["id", 9]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 12], ["LIMIT", 1]]
  [1m[36mActiveStorage::VariantRecord Load (0.0ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ?[0m  [["blob_id", 12]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Destroy (0.0ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ?[0m  [["id", 12]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.1ms) [0m[31mDeleted file from key: epqqf8hxqnb4p6b0atgnqggqp857[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mDetachmentDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-07-31 18:21:00.186762"], ["updated_at", "2025-07-31 18:21:00.186762"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "DetachmentDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "DetachmentDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "48rrsau3u7vi9qrp1d0ksuu0kvxk"], ["filename", "first.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:21:00.194650"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "DetachmentDocument"], ["record_id", 10], ["blob_id", 13], ["created_at", "2025-07-31 18:21:00.194924"]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:21:00.195239"], ["id", 10]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 48rrsau3u7vi9qrp1d0ksuu0kvxk (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 13]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 13]]
  [1m[36mDetachmentDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 10]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:21:00.199533"], ["id", 10]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (0.0ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 13]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "y6db0s1trtpj7mov1pdwuha3x2hj"], ["filename", "second.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "lsFcK7KSEZO/KQ34zYXiug=="], ["created_at", "2025-07-31 18:21:00.203359"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "DetachmentDocument"], ["record_id", 10], ["blob_id", 14], ["created_at", "2025-07-31 18:21:00.203469"]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:21:00.203721"], ["id", 10]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: y6db0s1trtpj7mov1pdwuha3x2hj (checksum: lsFcK7KSEZO/KQ34zYXiug==)[0m
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 21f14bb9-c24a-4b26-8125-06baced2db4c) to Test(default) with arguments: #<GlobalID:0x000000012d1b0fc0 @uri=#<URI::GID gid://test/ActiveStorage::Blob/13>>
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 14]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 14]]
  [1m[36mDetachmentDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 10]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:21:00.205471"], ["id", 10]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mFullCallbackGallery Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Gallery"], ["created_at", "2025-07-31 18:21:00.219052"], ["updated_at", "2025-07-31 18:21:00.219052"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 11], ["record_type", "FullCallbackGallery"], ["name", "photos"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 11], ["record_type", "FullCallbackGallery"], ["name", "photos"]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "82dn6hrhw0o58hmnabrta0vjohc8"], ["filename", "photo1.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "0nwGiDMOwP8FcYLUTkJ60A=="], ["created_at", "2025-07-31 18:21:00.227182"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "photos"], ["record_type", "FullCallbackGallery"], ["record_id", 11], ["blob_id", 15], ["created_at", "2025-07-31 18:21:00.227506"]]
  [1m[36mFullCallbackGallery Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:21:00.228181"], ["id", 11]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.7ms) [0m[32mUploaded file to key: 82dn6hrhw0o58hmnabrta0vjohc8 (checksum: 0nwGiDMOwP8FcYLUTkJ60A==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 34e12f21-5e5a-4edf-a370-a2e15026d242) to Test(default) with arguments: #<GlobalID:0x000000012d1bfd90 @uri=#<URI::GID gid://test/ActiveStorage::Blob/15>>
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (0.1ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 15]]
  [1m[36mFullCallbackGallery Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:21:00.237268"], ["id", 11]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 15], ["LIMIT", 1]]
  [1m[36mActiveStorage::VariantRecord Load (0.0ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ?[0m  [["blob_id", 15]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 15], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Destroy (0.0ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ?[0m  [["id", 15]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.1ms) [0m[31mDeleted file from key: 82dn6hrhw0o58hmnabrta0vjohc8[0m
[36m  Disk Storage (0.0ms) [0m[31mDeleted files by key prefix: variants/82dn6hrhw0o58hmnabrta0vjohc8/[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 18:21:21.068523', '2025-07-31 18:21:21.068524') RETURNING "key"[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mDetachmentDocument Create (1.9ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-07-31 18:21:21.120284"], ["updated_at", "2025-07-31 18:21:21.120284"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "DetachmentDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "DetachmentDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "7fsq77dyiqtd9ta4c2pfjmha12ut"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:21:21.172238"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "DetachmentDocument"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-07-31 18:21:21.173335"]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:21:21.175779"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.7ms) [0m[32mUploaded file to key: 7fsq77dyiqtd9ta4c2pfjmha12ut (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mDetachmentDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 1]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:21:21.202450"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (0.0ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 1]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:21:21.207822"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 1], ["LIMIT", 1]]
  [1m[36mActiveStorage::VariantRecord Load (0.0ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Destroy (0.0ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ?[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.1ms) [0m[31mDeleted file from key: 7fsq77dyiqtd9ta4c2pfjmha12ut[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 18:21:47.804727', '2025-07-31 18:21:47.804729') RETURNING "key"[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 18:22:15.012208', '2025-07-31 18:22:15.012210') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDoc Create (0.9ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-07-31 18:22:15.034889"], ["updated_at", "2025-07-31 18:22:15.034889"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDoc"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDoc"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "ptb5nt1vlgmf4o99dci2v3y87zy6"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:22:15.086231"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDoc"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-07-31 18:22:15.087442"]]
  [1m[36mTestDoc Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:22:15.089961"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.7ms) [0m[32mUploaded file to key: ptb5nt1vlgmf4o99dci2v3y87zy6 (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mTestDoc Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 1]]
  [1m[36mTestDoc Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:22:15.120013"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (0.0ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 1]]
  [1m[36mTestDoc Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:22:15.126495"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 18:22:37.563372', '2025-07-31 18:22:37.563374') RETURNING "key"[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 18:23:33.698686', '2025-07-31 18:23:33.698688') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDoc Create (0.3ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-07-31 18:23:33.720971"], ["updated_at", "2025-07-31 18:23:33.720971"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDoc"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDoc"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "9pchvpdxzt4n2c70aw2l07uhui9q"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:23:33.772378"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDoc"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-07-31 18:23:33.773666"]]
  [1m[36mTestDoc Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:23:33.776190"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.7ms) [0m[32mUploaded file to key: 9pchvpdxzt4n2c70aw2l07uhui9q (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mTestDoc Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 1]]
  [1m[36mTestDoc Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:23:33.806394"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (1.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 1]]
  [1m[36mTestDoc Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:23:33.813474"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 1], ["LIMIT", 1]]
  [1m[36mActiveStorage::VariantRecord Load (0.0ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Destroy (0.0ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ?[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.1ms) [0m[31mDeleted file from key: 9pchvpdxzt4n2c70aw2l07uhui9q[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 18:23:51.323894', '2025-07-31 18:23:51.323895') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDoc Create (0.3ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-07-31 18:23:51.348181"], ["updated_at", "2025-07-31 18:23:51.348181"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDoc"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDoc"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "fpmvvmlgmsa33vqpozk91wc80uj6"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:23:51.399024"]]
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDoc"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-07-31 18:23:51.400357"]]
  [1m[36mTestDoc Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:23:51.403248"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.8ms) [0m[32mUploaded file to key: fpmvvmlgmsa33vqpozk91wc80uj6 (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mTestDoc Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 1]]
  [1m[36mTestDoc Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:23:51.432116"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (1.0ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 1]]
  [1m[36mTestDoc Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:23:51.439056"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 1], ["LIMIT", 1]]
  [1m[36mActiveStorage::VariantRecord Load (0.0ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Destroy (0.0ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ?[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.1ms) [0m[31mDeleted file from key: fpmvvmlgmsa33vqpozk91wc80uj6[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 18:24:05.194946', '2025-07-31 18:24:05.194948') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDoc Create (0.3ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-07-31 18:24:05.219566"], ["updated_at", "2025-07-31 18:24:05.219566"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDoc"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDoc"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "tfsrjdqev2loca9ggdbjiymajjj2"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:24:05.271575"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDoc"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-07-31 18:24:05.272890"]]
  [1m[36mTestDoc Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:05.275409"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: tfsrjdqev2loca9ggdbjiymajjj2 (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mTestDoc Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 1]]
  [1m[36mTestDoc Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:05.304378"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (1.0ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 1]]
  [1m[36mTestDoc Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:05.313884"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: a55c052a-bdd0-4cfe-a162-e345f24e4942) to Test(default) with arguments: #<GlobalID:0x0000000127011580 @uri=#<URI::GID gid://test/ActiveStorage::Blob/1>>
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 18:24:36.193651', '2025-07-31 18:24:36.193653') RETURNING "key"[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (2.9ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:24:36.242232"], ["updated_at", "2025-07-31 18:24:36.242232"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "jj5kpicbvvyynkqqd4wt47ctdizn"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:24:36.315319"]]
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-07-31 18:24:36.316231"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:36.318679"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.8ms) [0m[32mUploaded file to key: jj5kpicbvvyynkqqd4wt47ctdizn (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.9ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 1]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:36.346599"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:24:36.359865"], ["updated_at", "2025-07-31 18:24:36.359865"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "pzb0poavkh4zbfkgvjvftcwc0z7m"], ["filename", "test.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 15], ["checksum", "xy0EDuH9zYvOCfyLbmxHlA=="], ["created_at", "2025-07-31 18:24:36.374091"]]
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "TestDocument"], ["record_id", 2], ["blob_id", 2], ["created_at", "2025-07-31 18:24:36.375637"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:36.377013"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.6ms) [0m[32mUploaded file to key: pzb0poavkh4zbfkgvjvftcwc0z7m (checksum: xy0EDuH9zYvOCfyLbmxHlA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 0af1ad3e-f34c-4807-8e2d-0846fe367bb7) to Test(default) with arguments: #<GlobalID:0x000000012a4fb408 @uri=#<URI::GID gid://test/ActiveStorage::Blob/2>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:24:36.405777"], ["updated_at", "2025-07-31 18:24:36.405777"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "zltk267m33bju2h4t1stwbt6551s"], ["filename", "test.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 15], ["checksum", "xy0EDuH9zYvOCfyLbmxHlA=="], ["created_at", "2025-07-31 18:24:36.421174"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "TestDocument"], ["record_id", 3], ["blob_id", 3], ["created_at", "2025-07-31 18:24:36.421915"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:36.422616"], ["id", 3]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: zltk267m33bju2h4t1stwbt6551s (checksum: xy0EDuH9zYvOCfyLbmxHlA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: ac3671b7-e000-4aae-a587-4d1ae902450f) to Test(default) with arguments: #<GlobalID:0x000000012a9950b8 @uri=#<URI::GID gid://test/ActiveStorage::Blob/3>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:24:36.431705"], ["updated_at", "2025-07-31 18:24:36.431705"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "hq28nuqnnx0ikfmqkty39znm8n4z"], ["filename", "first.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:24:36.441919"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 4], ["blob_id", 4], ["created_at", "2025-07-31 18:24:36.442152"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:36.443160"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: hq28nuqnnx0ikfmqkty39znm8n4z (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 4]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 4]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 4]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:36.452975"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (0.1ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 4]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "4omis48pxfkji7ufewsj72qpbep6"], ["filename", "second.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "lsFcK7KSEZO/KQ34zYXiug=="], ["created_at", "2025-07-31 18:24:36.468513"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 4], ["blob_id", 5], ["created_at", "2025-07-31 18:24:36.470119"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:36.470463"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 4omis48pxfkji7ufewsj72qpbep6 (checksum: lsFcK7KSEZO/KQ34zYXiug==)[0m
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 35bba4c2-2d88-4422-aa57-bf857f23cb68) to Test(default) with arguments: #<GlobalID:0x0000000129f3c210 @uri=#<URI::GID gid://test/ActiveStorage::Blob/4>>
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 5]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 5]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 4]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:36.480854"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mMultiCallbackDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Multi callback test"], ["created_at", "2025-07-31 18:24:36.492477"], ["updated_at", "2025-07-31 18:24:36.492477"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "active_storage_attachments"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "MultiCallbackDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "MultiCallbackDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "nrvagxcy6ews8scir1axioxz3dq3"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:24:36.510205"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "MultiCallbackDocument"], ["record_id", 5], ["blob_id", 6], ["created_at", "2025-07-31 18:24:36.511333"]]
  [1m[36mMultiCallbackDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:36.511827"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: nrvagxcy6ews8scir1axioxz3dq3 (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 6]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 6]]
  [1m[36mMultiCallbackDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 5]]
  [1m[36mMultiCallbackDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:36.519414"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "active_storage_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mGallery Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Gallery"], ["created_at", "2025-07-31 18:24:36.539020"], ["updated_at", "2025-07-31 18:24:36.539020"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 6], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 6], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "vp8uu0lwupissypmweo16w2qnefl"], ["filename", "photo1.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "0nwGiDMOwP8FcYLUTkJ60A=="], ["created_at", "2025-07-31 18:24:36.568767"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "photos"], ["record_type", "Gallery"], ["record_id", 6], ["blob_id", 7], ["created_at", "2025-07-31 18:24:36.569187"]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "uybqy6r2gn99xqwg7q668rtv0drl"], ["filename", "photo2.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "2iSN3pT0uZ8YGYVxQP3v/A=="], ["created_at", "2025-07-31 18:24:36.572294"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "photos"], ["record_type", "Gallery"], ["record_id", 6], ["blob_id", 8], ["created_at", "2025-07-31 18:24:36.573778"]]
  [1m[36mGallery Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:36.574608"], ["id", 6]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: vp8uu0lwupissypmweo16w2qnefl (checksum: 0nwGiDMOwP8FcYLUTkJ60A==)[0m
[36m  Disk Storage (1.2ms) [0m[32mUploaded file to key: uybqy6r2gn99xqwg7q668rtv0drl (checksum: 2iSN3pT0uZ8YGYVxQP3v/A==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: ccd275ad-4958-40a1-8cb7-d083131e9d1a) to Test(default) with arguments: #<GlobalID:0x000000011fed2608 @uri=#<URI::GID gid://test/ActiveStorage::Blob/7>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 6e01a3bf-08d8-45d3-9757-2a851a4e718e) to Test(default) with arguments: #<GlobalID:0x000000011fe76088 @uri=#<URI::GID gid://test/ActiveStorage::Blob/8>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mGallery Create (0.2ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Gallery"], ["created_at", "2025-07-31 18:24:36.591439"], ["updated_at", "2025-07-31 18:24:36.591439"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 7], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 7], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "fh7w1jm1q0csj3q57z9aaoprcyjd"], ["filename", "photo1.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "0nwGiDMOwP8FcYLUTkJ60A=="], ["created_at", "2025-07-31 18:24:36.601504"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "photos"], ["record_type", "Gallery"], ["record_id", 7], ["blob_id", 9], ["created_at", "2025-07-31 18:24:36.603051"]]
  [1m[36mGallery Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:36.603481"], ["id", 7]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: fh7w1jm1q0csj3q57z9aaoprcyjd (checksum: 0nwGiDMOwP8FcYLUTkJ60A==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 62959b8d-ebca-4fde-90ea-be050365e026) to Test(default) with arguments: #<GlobalID:0x000000012a953758 @uri=#<URI::GID gid://test/ActiveStorage::Blob/9>>
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 7], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "o3upfok81mzo81mzdxa54i3zmir7"], ["filename", "photo2.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "2iSN3pT0uZ8YGYVxQP3v/A=="], ["created_at", "2025-07-31 18:24:36.609242"]]
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "photos"], ["record_type", "Gallery"], ["record_id", 7], ["blob_id", 10], ["created_at", "2025-07-31 18:24:36.609543"]]
  [1m[36mGallery Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:36.609771"], ["id", 7]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: o3upfok81mzo81mzdxa54i3zmir7 (checksum: 2iSN3pT0uZ8YGYVxQP3v/A==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 91383237-7756-4158-96d3-f8eb99ffec24) to Test(default) with arguments: #<GlobalID:0x000000012aa79920 @uri=#<URI::GID gid://test/ActiveStorage::Blob/10>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mBeforeAttachedDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-07-31 18:24:36.618246"], ["updated_at", "2025-07-31 18:24:36.618246"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "BeforeAttachedDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "BeforeAttachedDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "2sns2ur0yyw6auwvu1njmn3s12af"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:24:36.627824"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "BeforeAttachedDocument"], ["record_id", 8], ["blob_id", 11], ["created_at", "2025-07-31 18:24:36.630255"]]
  [1m[36mBeforeAttachedDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:36.631459"], ["id", 8]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: 2sns2ur0yyw6auwvu1njmn3s12af (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 11]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 11]]
  [1m[36mBeforeAttachedDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 8]]
  [1m[36mBeforeAttachedDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:36.642276"], ["id", 8]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mDetachmentDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-07-31 18:24:36.650421"], ["updated_at", "2025-07-31 18:24:36.650421"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "DetachmentDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "DetachmentDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "k069dooe49v7sb5ohjsk3a2wvhby"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:24:36.660537"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "DetachmentDocument"], ["record_id", 9], ["blob_id", 12], ["created_at", "2025-07-31 18:24:36.661272"]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:36.661716"], ["id", 9]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: k069dooe49v7sb5ohjsk3a2wvhby (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 12]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 12]]
  [1m[36mDetachmentDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 9]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:36.666508"], ["id", 9]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (0.1ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 12]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:36.667126"], ["id", 9]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: e7f11e76-7512-4405-9f0a-c3c88d33c8ae) to Test(default) with arguments: #<GlobalID:0x000000012ab57950 @uri=#<URI::GID gid://test/ActiveStorage::Blob/12>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mDetachmentDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-07-31 18:24:36.682828"], ["updated_at", "2025-07-31 18:24:36.682828"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "DetachmentDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "DetachmentDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "03t378l3fbuikn0b2oor555hebg1"], ["filename", "first.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:24:36.692126"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "DetachmentDocument"], ["record_id", 10], ["blob_id", 13], ["created_at", "2025-07-31 18:24:36.692490"]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:36.692796"], ["id", 10]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: 03t378l3fbuikn0b2oor555hebg1 (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (1.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 13]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 13]]
  [1m[36mDetachmentDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 10]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:36.699920"], ["id", 10]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (0.1ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 13]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "abuv1tpetmtp71q3q88v17vxb4gw"], ["filename", "second.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "lsFcK7KSEZO/KQ34zYXiug=="], ["created_at", "2025-07-31 18:24:36.705097"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "DetachmentDocument"], ["record_id", 10], ["blob_id", 14], ["created_at", "2025-07-31 18:24:36.705262"]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:36.705547"], ["id", 10]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.5ms) [0m[32mUploaded file to key: abuv1tpetmtp71q3q88v17vxb4gw (checksum: lsFcK7KSEZO/KQ34zYXiug==)[0m
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: e850adb4-3c62-4bcb-b7f3-de5b6833b655) to Test(default) with arguments: #<GlobalID:0x000000012afbc0b8 @uri=#<URI::GID gid://test/ActiveStorage::Blob/13>>
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 14]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 14]]
  [1m[36mDetachmentDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 10]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:36.708047"], ["id", 10]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mFullCallbackGallery Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Gallery"], ["created_at", "2025-07-31 18:24:36.722802"], ["updated_at", "2025-07-31 18:24:36.722802"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 11], ["record_type", "FullCallbackGallery"], ["name", "photos"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 11], ["record_type", "FullCallbackGallery"], ["name", "photos"]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "0jrnuulhstn9d2kb7wjz76cj1v0c"], ["filename", "photo1.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "0nwGiDMOwP8FcYLUTkJ60A=="], ["created_at", "2025-07-31 18:24:36.731011"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "photos"], ["record_type", "FullCallbackGallery"], ["record_id", 11], ["blob_id", 15], ["created_at", "2025-07-31 18:24:36.731283"]]
  [1m[36mFullCallbackGallery Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:36.731747"], ["id", 11]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.6ms) [0m[32mUploaded file to key: 0jrnuulhstn9d2kb7wjz76cj1v0c (checksum: 0nwGiDMOwP8FcYLUTkJ60A==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 83348f9e-4913-4844-bc25-c8e58273b4cd) to Test(default) with arguments: #<GlobalID:0x000000012f0f3e78 @uri=#<URI::GID gid://test/ActiveStorage::Blob/15>>
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (0.0ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 15]]
  [1m[36mFullCallbackGallery Update (0.1ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:36.737424"], ["id", 11]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 3f3b00b3-294d-46b8-904a-7d20ad3ba965) to Test(default) with arguments: #<GlobalID:0x0000000129dfb248 @uri=#<URI::GID gid://test/ActiveStorage::Blob/15>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 18:24:59.779221', '2025-07-31 18:24:59.779223') RETURNING "key"[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (4.3ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:24:59.828017"], ["updated_at", "2025-07-31 18:24:59.828017"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "vlhmh3wxd86ci4lwk1st5nfgrl3g"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:24:59.882559"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-07-31 18:24:59.883497"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:59.886005"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.7ms) [0m[32mUploaded file to key: vlhmh3wxd86ci4lwk1st5nfgrl3g (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (1.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 1]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:59.913542"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:24:59.926536"], ["updated_at", "2025-07-31 18:24:59.926536"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "cip0q4e6j1sgu5bgw3egpimq1azs"], ["filename", "test.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 15], ["checksum", "xy0EDuH9zYvOCfyLbmxHlA=="], ["created_at", "2025-07-31 18:24:59.940729"]]
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "TestDocument"], ["record_id", 2], ["blob_id", 2], ["created_at", "2025-07-31 18:24:59.942243"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:59.943584"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.5ms) [0m[32mUploaded file to key: cip0q4e6j1sgu5bgw3egpimq1azs (checksum: xy0EDuH9zYvOCfyLbmxHlA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: bee709a4-88bd-42ae-899b-f0c8c7591084) to Test(default) with arguments: #<GlobalID:0x00000001254d7288 @uri=#<URI::GID gid://test/ActiveStorage::Blob/2>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:24:59.977784"], ["updated_at", "2025-07-31 18:24:59.977784"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "cxba22m8o7zy17ly7dunvo9x4eg0"], ["filename", "test.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 15], ["checksum", "xy0EDuH9zYvOCfyLbmxHlA=="], ["created_at", "2025-07-31 18:24:59.993668"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "TestDocument"], ["record_id", 3], ["blob_id", 3], ["created_at", "2025-07-31 18:24:59.994416"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:24:59.995273"], ["id", 3]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: cxba22m8o7zy17ly7dunvo9x4eg0 (checksum: xy0EDuH9zYvOCfyLbmxHlA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 846495a4-4fb3-434f-985d-2146ecf604e0) to Test(default) with arguments: #<GlobalID:0x0000000124e35ad8 @uri=#<URI::GID gid://test/ActiveStorage::Blob/3>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:25:00.004976"], ["updated_at", "2025-07-31 18:25:00.004976"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "p40qxd76fsvl7m5qdzols8k5nrft"], ["filename", "first.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:25:00.015398"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 4], ["blob_id", 4], ["created_at", "2025-07-31 18:25:00.015813"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:25:00.016799"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: p40qxd76fsvl7m5qdzols8k5nrft (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 4]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 4]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 4]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:25:00.026519"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (0.1ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 4]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "08x9pyvdawqt14pmkucvtl2leghg"], ["filename", "second.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "lsFcK7KSEZO/KQ34zYXiug=="], ["created_at", "2025-07-31 18:25:00.038359"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 4], ["blob_id", 5], ["created_at", "2025-07-31 18:25:00.040006"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:25:00.040378"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: 08x9pyvdawqt14pmkucvtl2leghg (checksum: lsFcK7KSEZO/KQ34zYXiug==)[0m
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 3f5b1ed7-5158-4c99-8345-ced4991f125e) to Test(default) with arguments: #<GlobalID:0x00000001254fc2e0 @uri=#<URI::GID gid://test/ActiveStorage::Blob/4>>
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 5]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 5]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 4]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:25:00.050563"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mMultiCallbackDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Multi callback test"], ["created_at", "2025-07-31 18:25:00.061867"], ["updated_at", "2025-07-31 18:25:00.061867"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "active_storage_attachments"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "MultiCallbackDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "MultiCallbackDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "rg8p1kn8bcen6i695grx2gimee7k"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:25:00.079101"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "MultiCallbackDocument"], ["record_id", 5], ["blob_id", 6], ["created_at", "2025-07-31 18:25:00.080202"]]
  [1m[36mMultiCallbackDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:25:00.080660"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: rg8p1kn8bcen6i695grx2gimee7k (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 6]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 6]]
  [1m[36mMultiCallbackDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 5]]
  [1m[36mMultiCallbackDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:25:00.088298"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "active_storage_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mGallery Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Gallery"], ["created_at", "2025-07-31 18:25:00.108196"], ["updated_at", "2025-07-31 18:25:00.108196"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 6], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 6], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "uag1pmkkrim6tfgt86karryk4oah"], ["filename", "photo1.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "0nwGiDMOwP8FcYLUTkJ60A=="], ["created_at", "2025-07-31 18:25:00.131276"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "photos"], ["record_type", "Gallery"], ["record_id", 6], ["blob_id", 7], ["created_at", "2025-07-31 18:25:00.131615"]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "h3asexi8sn3bfwg9rnattq26pgav"], ["filename", "photo2.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "2iSN3pT0uZ8YGYVxQP3v/A=="], ["created_at", "2025-07-31 18:25:00.132544"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "photos"], ["record_type", "Gallery"], ["record_id", 6], ["blob_id", 8], ["created_at", "2025-07-31 18:25:00.132666"]]
  [1m[36mGallery Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:25:00.132894"], ["id", 6]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: uag1pmkkrim6tfgt86karryk4oah (checksum: 0nwGiDMOwP8FcYLUTkJ60A==)[0m
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: h3asexi8sn3bfwg9rnattq26pgav (checksum: 2iSN3pT0uZ8YGYVxQP3v/A==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 0bdf4e02-4590-4abe-9ec3-5948384b8411) to Test(default) with arguments: #<GlobalID:0x0000000124bdfb30 @uri=#<URI::GID gid://test/ActiveStorage::Blob/7>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 9c387b73-1958-4451-b319-115847d59038) to Test(default) with arguments: #<GlobalID:0x0000000124bdc610 @uri=#<URI::GID gid://test/ActiveStorage::Blob/8>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mGallery Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Gallery"], ["created_at", "2025-07-31 18:25:00.144976"], ["updated_at", "2025-07-31 18:25:00.144976"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 7], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 7], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "bvjr6wnnzlezzr2qvqfhijogro9s"], ["filename", "photo1.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "0nwGiDMOwP8FcYLUTkJ60A=="], ["created_at", "2025-07-31 18:25:00.154554"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "photos"], ["record_type", "Gallery"], ["record_id", 7], ["blob_id", 9], ["created_at", "2025-07-31 18:25:00.156108"]]
  [1m[36mGallery Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:25:00.156506"], ["id", 7]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: bvjr6wnnzlezzr2qvqfhijogro9s (checksum: 0nwGiDMOwP8FcYLUTkJ60A==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 2755ea7a-5150-4ad3-b314-c0bcb65e597f) to Test(default) with arguments: #<GlobalID:0x000000012543e498 @uri=#<URI::GID gid://test/ActiveStorage::Blob/9>>
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 7], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "ud8tj59h5ajpdhmnsb0vpwtlkxw4"], ["filename", "photo2.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "2iSN3pT0uZ8YGYVxQP3v/A=="], ["created_at", "2025-07-31 18:25:00.162414"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "photos"], ["record_type", "Gallery"], ["record_id", 7], ["blob_id", 10], ["created_at", "2025-07-31 18:25:00.162743"]]
  [1m[36mGallery Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:25:00.162872"], ["id", 7]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: ud8tj59h5ajpdhmnsb0vpwtlkxw4 (checksum: 2iSN3pT0uZ8YGYVxQP3v/A==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: d0a3f74e-4d83-4c95-84ae-d679a266f31d) to Test(default) with arguments: #<GlobalID:0x000000012549bcb0 @uri=#<URI::GID gid://test/ActiveStorage::Blob/10>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mBeforeAttachedDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-07-31 18:25:00.171250"], ["updated_at", "2025-07-31 18:25:00.171250"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "BeforeAttachedDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "BeforeAttachedDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "kbq6alox7v3gupgzk8g7xjo9dvj3"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:25:00.186247"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "BeforeAttachedDocument"], ["record_id", 8], ["blob_id", 11], ["created_at", "2025-07-31 18:25:00.189360"]]
  [1m[36mBeforeAttachedDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:25:00.190674"], ["id", 8]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: kbq6alox7v3gupgzk8g7xjo9dvj3 (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 11]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 11]]
  [1m[36mBeforeAttachedDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 8]]
  [1m[36mBeforeAttachedDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:25:00.202966"], ["id", 8]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mDetachmentDocument Create (0.4ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-07-31 18:25:00.220365"], ["updated_at", "2025-07-31 18:25:00.220365"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "DetachmentDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "DetachmentDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "atukh3du6teagiqt9u0ani0a4f2b"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:25:00.232560"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "DetachmentDocument"], ["record_id", 9], ["blob_id", 12], ["created_at", "2025-07-31 18:25:00.233112"]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:25:00.233470"], ["id", 9]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: atukh3du6teagiqt9u0ani0a4f2b (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 12]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 12]]
  [1m[36mDetachmentDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 9]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:25:00.238201"], ["id", 9]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (0.0ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 12]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:25:00.238945"], ["id", 9]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 956e15b5-0f75-448e-9690-df65cd52b47c) to Test(default) with arguments: #<GlobalID:0x000000012503d6f0 @uri=#<URI::GID gid://test/ActiveStorage::Blob/12>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mDetachmentDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-07-31 18:25:00.246307"], ["updated_at", "2025-07-31 18:25:00.246307"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "DetachmentDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "DetachmentDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "qbpzdjr6676pzcepcw2qw133qnku"], ["filename", "first.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:25:00.255305"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "DetachmentDocument"], ["record_id", 10], ["blob_id", 13], ["created_at", "2025-07-31 18:25:00.255669"]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:25:00.256077"], ["id", 10]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: qbpzdjr6676pzcepcw2qw133qnku (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.9ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 13]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 13]]
  [1m[36mDetachmentDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 10]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:25:00.262285"], ["id", 10]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (0.0ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 13]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "14ntpfawpklw8bvgsyhlv5qgwlor"], ["filename", "second.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "lsFcK7KSEZO/KQ34zYXiug=="], ["created_at", "2025-07-31 18:25:00.266955"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "DetachmentDocument"], ["record_id", 10], ["blob_id", 14], ["created_at", "2025-07-31 18:25:00.267071"]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:25:00.267369"], ["id", 10]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: 14ntpfawpklw8bvgsyhlv5qgwlor (checksum: lsFcK7KSEZO/KQ34zYXiug==)[0m
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 1235eb9d-5b80-4cd7-976c-cbc7b6c0d0fc) to Test(default) with arguments: #<GlobalID:0x00000001256327b8 @uri=#<URI::GID gid://test/ActiveStorage::Blob/13>>
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 14]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 14]]
  [1m[36mDetachmentDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 10]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:25:00.269476"], ["id", 10]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mFullCallbackGallery Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Gallery"], ["created_at", "2025-07-31 18:25:00.282918"], ["updated_at", "2025-07-31 18:25:00.282918"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 11], ["record_type", "FullCallbackGallery"], ["name", "photos"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 11], ["record_type", "FullCallbackGallery"], ["name", "photos"]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "j56z32zk5mklmlm8jweujde2ekd8"], ["filename", "photo1.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "0nwGiDMOwP8FcYLUTkJ60A=="], ["created_at", "2025-07-31 18:25:00.290122"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "photos"], ["record_type", "FullCallbackGallery"], ["record_id", 11], ["blob_id", 15], ["created_at", "2025-07-31 18:25:00.290353"]]
  [1m[36mFullCallbackGallery Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:25:00.290775"], ["id", 11]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.6ms) [0m[32mUploaded file to key: j56z32zk5mklmlm8jweujde2ekd8 (checksum: 0nwGiDMOwP8FcYLUTkJ60A==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: fb1ff513-7c07-42de-b5f4-94dd825606ff) to Test(default) with arguments: #<GlobalID:0x00000001211e2db0 @uri=#<URI::GID gid://test/ActiveStorage::Blob/15>>
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (0.0ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 15]]
  [1m[36mFullCallbackGallery Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:25:00.296290"], ["id", 11]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 6d3c8011-898b-4937-ba89-65f4bfc7edbe) to Test(default) with arguments: #<GlobalID:0x000000012567b850 @uri=#<URI::GID gid://test/ActiveStorage::Blob/15>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "documents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-07-31 18:26:59.040260', '2025-07-31 18:26:59.040262') RETURNING "key"[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (3.2ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:26:59.100776"], ["updated_at", "2025-07-31 18:26:59.100776"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "65u46rq3q7qfjt006cm6e06q57o8"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:26:59.180612"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-07-31 18:26:59.181497"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:26:59.183871"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: 65u46rq3q7qfjt006cm6e06q57o8 (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (1.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 1]]
  [1m[36mTestDocument Update (0.1ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:26:59.214072"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:26:59.228015"], ["updated_at", "2025-07-31 18:26:59.228015"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "incf47y3wa0hfjlqx3r7oi7ggm4h"], ["filename", "test.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 15], ["checksum", "xy0EDuH9zYvOCfyLbmxHlA=="], ["created_at", "2025-07-31 18:26:59.242374"]]
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "TestDocument"], ["record_id", 2], ["blob_id", 2], ["created_at", "2025-07-31 18:26:59.244254"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:26:59.246015"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.8ms) [0m[32mUploaded file to key: incf47y3wa0hfjlqx3r7oi7ggm4h (checksum: xy0EDuH9zYvOCfyLbmxHlA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 614de903-3c10-47e2-b204-53763751430d) to Test(default) with arguments: #<GlobalID:0x0000000124dbf630 @uri=#<URI::GID gid://test/ActiveStorage::Blob/2>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:26:59.279296"], ["updated_at", "2025-07-31 18:26:59.279296"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "TestDocument"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "be0o7l5s78evp8yt8u7abzcz1780"], ["filename", "test.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 15], ["checksum", "xy0EDuH9zYvOCfyLbmxHlA=="], ["created_at", "2025-07-31 18:26:59.295379"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "TestDocument"], ["record_id", 3], ["blob_id", 3], ["created_at", "2025-07-31 18:26:59.296232"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:26:59.297034"], ["id", 3]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: be0o7l5s78evp8yt8u7abzcz1780 (checksum: xy0EDuH9zYvOCfyLbmxHlA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 3e432819-90b2-45e5-8acd-d4a74e3d36b4) to Test(default) with arguments: #<GlobalID:0x0000000125059328 @uri=#<URI::GID gid://test/ActiveStorage::Blob/3>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mTestDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Document"], ["created_at", "2025-07-31 18:26:59.307365"], ["updated_at", "2025-07-31 18:26:59.307365"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "TestDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "xwhjddmxby4m49tmfnsw8q0s1mbc"], ["filename", "first.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:26:59.318614"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 4], ["blob_id", 4], ["created_at", "2025-07-31 18:26:59.318925"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:26:59.319881"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: xwhjddmxby4m49tmfnsw8q0s1mbc (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 4]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 4]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 4]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:26:59.330219"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (0.0ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 4]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "ikfor0i962qklurxb109of8wp5d0"], ["filename", "second.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "lsFcK7KSEZO/KQ34zYXiug=="], ["created_at", "2025-07-31 18:26:59.346652"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "TestDocument"], ["record_id", 4], ["blob_id", 5], ["created_at", "2025-07-31 18:26:59.348268"]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:26:59.348626"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: ikfor0i962qklurxb109of8wp5d0 (checksum: lsFcK7KSEZO/KQ34zYXiug==)[0m
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 4982943a-1866-49b8-9d9d-d42eb8279c9b) to Test(default) with arguments: #<GlobalID:0x00000001247bf1e0 @uri=#<URI::GID gid://test/ActiveStorage::Blob/4>>
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 5]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 5]]
  [1m[36mTestDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 4]]
  [1m[36mTestDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:26:59.359531"], ["id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mMultiCallbackDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Multi callback test"], ["created_at", "2025-07-31 18:26:59.371664"], ["updated_at", "2025-07-31 18:26:59.371664"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "active_storage_attachments"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "MultiCallbackDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "MultiCallbackDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "96ix4nxallpxcyt95gysv4t202ep"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:26:59.391281"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "MultiCallbackDocument"], ["record_id", 5], ["blob_id", 6], ["created_at", "2025-07-31 18:26:59.392533"]]
  [1m[36mMultiCallbackDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:26:59.393114"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: 96ix4nxallpxcyt95gysv4t202ep (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 6]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 6]]
  [1m[36mMultiCallbackDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 5]]
  [1m[36mMultiCallbackDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:26:59.401567"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "active_storage_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mGallery Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Gallery"], ["created_at", "2025-07-31 18:26:59.423057"], ["updated_at", "2025-07-31 18:26:59.423057"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 6], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 6], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "4jzo7ve61thuz8cjr6lqdmg48avb"], ["filename", "photo1.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "0nwGiDMOwP8FcYLUTkJ60A=="], ["created_at", "2025-07-31 18:26:59.450718"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "photos"], ["record_type", "Gallery"], ["record_id", 6], ["blob_id", 7], ["created_at", "2025-07-31 18:26:59.451058"]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "jt1oihigin72az40rtfpk3j6z74i"], ["filename", "photo2.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "2iSN3pT0uZ8YGYVxQP3v/A=="], ["created_at", "2025-07-31 18:26:59.453909"]]
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "photos"], ["record_type", "Gallery"], ["record_id", 6], ["blob_id", 8], ["created_at", "2025-07-31 18:26:59.454541"]]
  [1m[36mGallery Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:26:59.456371"], ["id", 6]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (1.8ms) [0m[32mUploaded file to key: 4jzo7ve61thuz8cjr6lqdmg48avb (checksum: 0nwGiDMOwP8FcYLUTkJ60A==)[0m
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: jt1oihigin72az40rtfpk3j6z74i (checksum: 2iSN3pT0uZ8YGYVxQP3v/A==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 9b3426d0-272d-44a9-a86d-bcc9375ff4b2) to Test(default) with arguments: #<GlobalID:0x000000012445d240 @uri=#<URI::GID gid://test/ActiveStorage::Blob/7>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: de787525-43e7-4acb-916c-0d35f4c7511e) to Test(default) with arguments: #<GlobalID:0x0000000124411cf0 @uri=#<URI::GID gid://test/ActiveStorage::Blob/8>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mGallery Create (0.2ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Gallery"], ["created_at", "2025-07-31 18:26:59.475906"], ["updated_at", "2025-07-31 18:26:59.475906"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 7], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 7], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "ykyy5fagxi8202xpvkgdeqy8crik"], ["filename", "photo1.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "0nwGiDMOwP8FcYLUTkJ60A=="], ["created_at", "2025-07-31 18:26:59.486652"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "photos"], ["record_type", "Gallery"], ["record_id", 7], ["blob_id", 9], ["created_at", "2025-07-31 18:26:59.488243"]]
  [1m[36mGallery Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:26:59.488687"], ["id", 7]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: ykyy5fagxi8202xpvkgdeqy8crik (checksum: 0nwGiDMOwP8FcYLUTkJ60A==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 2a13701e-5c99-4b7a-90ab-1155f13c3b9b) to Test(default) with arguments: #<GlobalID:0x00000001250350b8 @uri=#<URI::GID gid://test/ActiveStorage::Blob/9>>
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 7], ["record_type", "Gallery"], ["name", "photos"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "jagd1qurhmc2oyueypw8eaw5gihg"], ["filename", "photo2.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "2iSN3pT0uZ8YGYVxQP3v/A=="], ["created_at", "2025-07-31 18:26:59.494395"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "photos"], ["record_type", "Gallery"], ["record_id", 7], ["blob_id", 10], ["created_at", "2025-07-31 18:26:59.494696"]]
  [1m[36mGallery Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:26:59.494860"], ["id", 7]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: jagd1qurhmc2oyueypw8eaw5gihg (checksum: 2iSN3pT0uZ8YGYVxQP3v/A==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 7a216058-b0e0-44ff-a57d-6301874b2e77) to Test(default) with arguments: #<GlobalID:0x0000000125092920 @uri=#<URI::GID gid://test/ActiveStorage::Blob/10>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mBeforeAttachedDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-07-31 18:26:59.504425"], ["updated_at", "2025-07-31 18:26:59.504425"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "BeforeAttachedDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "BeforeAttachedDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "gg57o2x72pxo9jcwbjsv25xjykmm"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:26:59.514378"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "BeforeAttachedDocument"], ["record_id", 8], ["blob_id", 11], ["created_at", "2025-07-31 18:26:59.517003"]]
  [1m[36mBeforeAttachedDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:26:59.518316"], ["id", 8]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.5ms) [0m[32mUploaded file to key: gg57o2x72pxo9jcwbjsv25xjykmm (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 11]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 11]]
  [1m[36mBeforeAttachedDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 8]]
  [1m[36mBeforeAttachedDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:26:59.530434"], ["id", 8]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mDetachmentDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-07-31 18:26:59.539411"], ["updated_at", "2025-07-31 18:26:59.539411"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "DetachmentDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "DetachmentDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "67oj42v8482jl7ttf20cst0mf53t"], ["filename", "test.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:26:59.550157"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "DetachmentDocument"], ["record_id", 9], ["blob_id", 12], ["created_at", "2025-07-31 18:26:59.550738"]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:26:59.551115"], ["id", 9]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.5ms) [0m[32mUploaded file to key: 67oj42v8482jl7ttf20cst0mf53t (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 12]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 12]]
  [1m[36mDetachmentDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 9]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:26:59.556311"], ["id", 9]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (0.0ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 12]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:26:59.556932"], ["id", 9]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: f844cdff-9a9b-4c8f-bcec-8ac63397cd97) to Test(default) with arguments: #<GlobalID:0x00000001253172b8 @uri=#<URI::GID gid://test/ActiveStorage::Blob/12>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mDetachmentDocument Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-07-31 18:26:59.563679"], ["updated_at", "2025-07-31 18:26:59.563679"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "DetachmentDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "DetachmentDocument"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "cyji1rp1e8h9lgit00ue0ac24f4t"], ["filename", "first.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 12], ["checksum", "lHP90NiApDwht3eNNIchVw=="], ["created_at", "2025-07-31 18:26:59.573217"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "DetachmentDocument"], ["record_id", 10], ["blob_id", 13], ["created_at", "2025-07-31 18:26:59.573554"]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:26:59.573881"], ["id", 10]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: cyji1rp1e8h9lgit00ue0ac24f4t (checksum: lHP90NiApDwht3eNNIchVw==)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.9ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 13]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 13]]
  [1m[36mDetachmentDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 10]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:26:59.580362"], ["id", 10]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (0.1ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 13]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "gaid3ak4srkrsdv6wfjgif4p6qip"], ["filename", "second.txt"], ["content_type", "text/plain"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "lsFcK7KSEZO/KQ34zYXiug=="], ["created_at", "2025-07-31 18:26:59.585676"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "file"], ["record_type", "DetachmentDocument"], ["record_id", 10], ["blob_id", 14], ["created_at", "2025-07-31 18:26:59.585823"]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:26:59.586107"], ["id", 10]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: gaid3ak4srkrsdv6wfjgif4p6qip (checksum: lsFcK7KSEZO/KQ34zYXiug==)[0m
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 0d03dc98-22ed-4952-ae83-d61eb193e75f) to Test(default) with arguments: #<GlobalID:0x00000001254bf228 @uri=#<URI::GID gid://test/ActiveStorage::Blob/13>>
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Blob Update (0.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 14]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 14]]
  [1m[36mDetachmentDocument Load (0.0ms)[0m  [1m[34mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ?[0m  [["id", 10]]
  [1m[36mDetachmentDocument Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:26:59.587969"], ["id", 10]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mFullCallbackGallery Create (0.1ms)[0m  [1m[32mINSERT INTO "documents" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Gallery"], ["created_at", "2025-07-31 18:26:59.602490"], ["updated_at", "2025-07-31 18:26:59.602490"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 11], ["record_type", "FullCallbackGallery"], ["name", "photos"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ?[0m  [["record_id", 11], ["record_type", "FullCallbackGallery"], ["name", "photos"]]
  [1m[36mActiveStorage::Blob Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "5y5zyijinszq21ppo8gbkpmdpsd8"], ["filename", "photo1.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "test"], ["byte_size", 11], ["checksum", "0nwGiDMOwP8FcYLUTkJ60A=="], ["created_at", "2025-07-31 18:26:59.610665"]]
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "photos"], ["record_type", "FullCallbackGallery"], ["record_id", 11], ["blob_id", 15], ["created_at", "2025-07-31 18:26:59.610995"]]
  [1m[36mFullCallbackGallery Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:26:59.611496"], ["id", 11]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[36m  Disk Storage (0.7ms) [0m[32mUploaded file to key: 5y5zyijinszq21ppo8gbkpmdpsd8 (checksum: 0nwGiDMOwP8FcYLUTkJ60A==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 52f852bc-0474-40e4-9acb-5f1bf04c191f) to Test(default) with arguments: #<GlobalID:0x00000001256b7008 @uri=#<URI::GID gid://test/ActiveStorage::Blob/15>>
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36mActiveStorage::Attachment Destroy (0.0ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 15]]
  [1m[36mFullCallbackGallery Update (0.0ms)[0m  [1m[33mUPDATE "documents" SET "updated_at" = ? WHERE "documents"."id" = ?[0m  [["updated_at", "2025-07-31 18:26:59.617916"], ["id", 11]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: c6d8fa24-192e-4a89-be01-adcde67d5fee) to Test(default) with arguments: #<GlobalID:0x000000012571b328 @uri=#<URI::GID gid://test/ActiveStorage::Blob/15>>
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_attachments[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM active_storage_blobs[0m
  [1m[35m (0.0ms)[0m  [1m[31mDELETE FROM documents[0m
